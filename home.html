<!DOCTYPE html>
<html>
    <head>
        <title>The Dave Stickmin Collection</title>
        <link rel="icon" type="image/ico" href="images/logo.ico">
        <link rel="stylesheet" href="stylesheets/home.css">
        <script src="cookies.js"></script>
    </head>
    <body onload="showWelcomeMessage()">
        <section id="welcome" class="welcome">
            <div class="welcome-container">
                <video autoplay muted>
                    <source src="images/bg.mp4" type="video/mp4">
                </video>
                <div class="welcome-texts">
                    <div class="welcome-message-container">
                        <p id="welcome-message"></p>
                    </div>
                    <div class="game-info">
                        <span>Welcome to</span>
                        <img id="game-name" src="images/game-name.png">
                        <span>, a scenario game based of a popular game!</span>
                    </div>
                    <div class="guidelines">
                        <h1>Guidelines:</h1>
                        <p>üí° Make choices throughout the game to progress through the story.
                            <br>
                            ‚úÖ Choose wisely ‚Äî each situation has a correct choice.
                            <br>
                            ‚ùå Wrong choice? You‚Äôll lose points from your total score.
                            <br>
                            üåü Right choice? You‚Äôll earn points and move forward!
                            <br>
                            üîÑ You can try again if you fail ‚Äî but be careful, your score matters!
                            <br>
                            üìà Each new map is harder than the last ‚Äî so stay sharp!</p>
                    </div>
                </div>
                <button class="close" onclick="closeWelcomeMessage()">
                    <img id="close" src="images/close.png">
                </button>
            </div>
        </section>
        <section id="interface" class="interface">
            <img id="loading" src="images/btb-loading.png">
            <div class="title">
                <h1 id="title">Prologue :</h1>
                <img id="logo" src="images/btb-logo.webp">
            </div>
            <div class="play">
                <div class="play-wrap" id="play-wrap">
                    <a id="play-button" href="btb.html" onclick="event.preventDefault(); playCutscene();">PLAY</a>
                </div>
            </div>
            <div id="flash"></div>
            <div class="ui">
                <img id="box" src="images/box.png">
            </div>
            <div class="ui">
                <div class="options">
                    <img class="map selected-map" id="btb" src="images/btb.png" onclick="removeSelection(); selectBTB();">
                    <img class="map" id="etp" src="images/etp.png" onclick="removeSelection(); selectETP();">
                    <img class="map" id="std" src="images/std.png" onclick="removeSelection(); selectSTD();">
                    <img class="map" id="ita" src="images/ita.png" onclick="removeSelection(); selectITA();">
                    <img class="map" id="ftc" src="images/ftc.png" onclick="removeSelection(); selectFTC();">
                    <img class="map" id="ctm" src="images/CtM.png" onclick="removeSelection(); selectCTM();">
                </div>
            </div>
            <div class="cutscene-container">
                <div id="btb-cutscene" class="cutscene">
                    <img src="images/btb-david-cutscene.png">
                </div>
                <div id="etp-cutscene" class="cutscene">
                    <img id="etp-cops" src="images/etp-cops-cutscene.png">
                    <img id="etp-david" src="images/etp-david-cutscene.png">
                </div>
            </div>
        </section>

        <script>
            function showWelcomeMessage(){
                const message = getCookie("username");
                document.getElementById('welcome-message').innerHTML = "Hello " + message + "!";
                document.getElementById('welcome').style.display = "flex";
                document.getElementById('interface').style.filter = "blur(5px)";
            }
            function closeWelcomeMessage(){
                document.getElementById('welcome').style.display = "none";
                document.getElementById('interface').style.filter = "blur(0px)";
            }
            function selectBTB(){
                document.getElementById('title').innerHTML = "Prologue:";
                document.getElementById('loading').src = "images/btb-loading.png";
                document.getElementById('logo').src = "images/btb-logo.webp";
                document.getElementById('play-button').href = "btb.html";
                document.getElementById('btb').classList.add('selected-map');
                document.body.style.backgroundImage = "url(../images/btb-bg.png)";
            }
            function selectETP(){
                document.getElementById('title').innerHTML = "Episode 1:";
                document.getElementById('loading').src = "images/etp-loading.png";
                document.getElementById('logo').src = "images/etp-logo.webp";
                document.getElementById('play-button').href = "etp.html";
                document.getElementById('etp').classList.add('selected-map');
                document.body.style.backgroundImage = "url(../images/etp-bg.png)";
            }
            function selectSTD(){
                document.getElementById('title').innerHTML = "Episode 2:";
                document.getElementById('loading').src = "images/std-loading.png";
                document.getElementById('logo').src = "images/std-logo.webp";
                document.getElementById('play-button').href = "std.html";
                document.getElementById('std').classList.add('selected-map');
                document.body.style.backgroundImage = "url(../images/std-bg.png)";
            }
            function selectITA(){
                document.getElementById('title').innerHTML = "Episode 3:";
                document.getElementById('loading').src = "images/ita-loading.gif";
                document.getElementById('logo').src = "images/ita-logo.webp";
                document.getElementById('play-button').href = "ita.html";
                document.getElementById('ita').classList.add('selected-map');
                document.body.style.backgroundImage = "url(../images/ita-bg.png)";
            }
            function selectFTC(){
                document.getElementById('title').innerHTML = "Episode 4:";
                document.getElementById('loading').src = "images/ftc-loading.png";
                document.getElementById('logo').src = "images/ftc-logo.webp";
                document.getElementById('play-button').href = "ftc.html";
                document.getElementById('ftc').classList.add('selected-map');
                document.body.style.backgroundImage = "url(../images/ftc-bg.png)";
            }
            function selectCTM(){
                document.getElementById('title').innerHTML = "Episode 5:";
                document.getElementById('loading').src = "images/ctm-loading.png";
                document.getElementById('logo').src = "images/ctm-logo.webp";
                document.getElementById('play-button').href = "ctm.html";
                document.getElementById('ctm').classList.add('selected-map');
                document.body.style.backgroundImage = "url(../images/ctm-bg.png)";
            }
            function removeSelection(){
                const maps = document.getElementsByClassName('map');
                for (let i = 0; i < maps.length; i++) {
                    maps[i].classList.remove('selected-map');
                }
            }
            function playCutscene(){
                const selectedMap = document.querySelector('.map.selected-map');
                const mapID = selectedMap.id;
                const cutscene = document.getElementById(mapID + '-cutscene');
                cutscene.style.display="flex";
                document.getElementById('flash').classList.add('flash');

                setTimeout(function() {
                    window.location.href = mapID +".html";
                }, 3000);
            }
        </script>
    </body>
</html>
